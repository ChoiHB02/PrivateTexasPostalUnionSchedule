## 이 문서는 더 타워 아이들 디펜스 게임의 데이터 관련 분석 문서입니다.
https://docs.google.com/spreadsheets/d/1T1UXtlJNzFyKRKVxBZO2HHQEnU1Jqi7ZLAzR9Tq5UyM/edit#gid=0

## --------------------------------------------------------------------

## [1. 결론](#결론)

## [2. 데이터 분석](#데이터-분석)

## [3. 스프레드 시트 설명](#스프레드-시트-설명)


## --------------------------------------------------------------------

## 결론
### 결과
  - 스탯 상승 패턴, 골드상승 패턴 분석
  - 대부분 수열을 사용하였는데 
  - 등차수열 하나로 모든 스탯을 정리한 슬레이어 키우기등과 같은 최근 게임과 달리 
  - 본 게임은 스탯마다 다른 수열을 사용하는 스타일의 게임
  - 몬스터 체력, 경험치, 골드는 시간이 필요

### 데이터 분석을 해보니
  - 전형적인 기획자 베이스게임 (구조가 어렵다)
  - 중요 데이터는 골드 소모량 외에 상승 패턴조차 수열로 구성
  - 아마도 기획자 개인의 성공의 경험을 바탕으로 기획된 것 같음
  - 엑셀에서 조건문까지 작업후 가져 온것 같음 (데이터가 부분 부분 튄다.)

### 이슈 없이 따라 하려면
  - 게임 진행을 통해 데이터를 수동으로 시트에 적고 정용

### 우리 기획을 추가하면
  - 무기, 스킬, 동료를 추가 하는데 모두 기본 스탯 데이터에서 특정 수치를 증폭하는 개념
  - 공격력 139% 상승 이럲식이고 실제 추가 스탯 수치가 들어가지 않는다.
  - 결국 우리 기획을 넣으면 사실상 강화가 되기 때문에 전투력이 올라가 전체적인 컨텐츠 소비 속도가 빨라질 것
     
## --------------------------------------------------------------------

## 데이터 분석 
### 방법 1 - 데이터 패턴 통해 역산
1) 중요 스탯 데이터 상승 패턴
    - 요즘 게임 패턴 : 공격력 상승 1,2,3,4,5,6
    - 더 타워 패턴 : 3,6, (등차수열을 쓰지 않고 임의 패턴을 만들었음)     
  
2) 골드 소모량 패턴
    = 일정 패턴을 알기 어럽다.
    - 시트로 가져왔을 가능성 
    - 아래는 관련 분석 데이터이다.  

3) 몬스터 관련 진행중
    - 데미지량을 통해 언제 죽는지 체크
    - 몬스터 처치후 경험치, 골드량 체크 
    - 위를 체크 후 확인 (골드 소모량과 비슷할거 같음)
    - 이 게임은 방치형이 아니기 때문에 웨이브당 수치가 있을 가능성이 있음
    - 해당 웨이브의 총량은 몬스터 수량으로 나누어 출현했을 가능성  
  
### 방법 2 - 해킹툴을 통한 분석
1) 최신 게임들은 리버스 엔지니어링이 쉽지 않다. 
    - 모바일 게임이 64비트 대응 되면서부터 어려워짐  
    - 컴파일러가 모노방식 -> il2cpp 방식으로 변화된것이 주요 이슈
    - 보안 관련도 변화가 있다고 함

2) 이전에는 
    - DNSpy, il2cpp 덤퍼 같은 툴로 간단하게 리버스 엔지니어링이 됨 (특별한 능력이 있거나 하는 것이 아님)
    - 심지어 초기 게임들은 apk를 알집, 반디집으로 풀면 소스를 다 볼수 있었음    
    - 현재는 이미지는 분석 가능하나 
    - 나머지는 구조 정도 보는 정도 (실제 도움이 되지 않는다.)

3) 이전 방법으로 해보니
    = 큰 도움이 되지 않음 
    - 구조 정도를 볼수 있는 수준
    - 이미지 리소스는 볼수 있음

3) ida pro (아이닷프로라고 보통 읽음) 사용하여 리버스 엔지니어링 중
    - 실제 많이 사용하는 리버스 엔지니어링 툴 (디버깅 툴이 원래 목적)
    - 유료 툴로 가격은 6천불 정도 (다른 툴에 비해 크랙이 쉽게 구해지지 않아 조금 걸렸음)
    - 100% 다 되는 것은 아님 

4) 현재 진행 상태
    - 어셈블리(기계어)로 소스를 리버스 엔지니어링 한 상태 
    - 이 방식을 통해 소스를 쓸수 있는 수준까지 갈수는 없다. 
    - 이 방식은 소스에서 특정 수치를 수정하는 새로운 빌드를 만드는 게 원래 목적
    - 현재 기계어를 변환하여 골드 소모량의 공식, 몬스터 체력등이 있는지 체크하는 중
    - 어셈블리라 분석이 시간이 걸림 (영준씨가 진행하고 있음)
   
5) 예상
    - 각 데이터별 골드 상승 공식 확인 목적
    - 스탯및 상승량등 수치는 특정 시트에서 가져왔을 것으로 추정
    - 몬스터 관련 상승 체력, 골드, 경험치 분석 목적
    - 1주일 정도 예상 (본 문서 종료와 별도로 진행 예정)
    - 실패할 가능성도 있음  

## --------------------------------------------------------------------

## 스프레드 시트 설명
### <a href="https://docs.google.com/spreadsheets/d/1T1UXtlJNzFyKRKVxBZO2HHQEnU1Jqi7ZLAzR9Tq5UyM/edit#gid=0" target="_blank"> 스프레드 연결 </a>

### 스탯 관련
0) 용어
 - A000000 와 같은 코드는 Oeis 에서 사용하는 수열 코드 
 - Oeis 는 온라인 정수열 사전의 이름
 -  https://oeis.org/
 
1) 데미지 
    - 상승패턴 -> 3,6,9,12,15,19,23,26,30
      - A224702 수열에 3을 더한 값을 기반으로 상승 수열이 만들어짐
    - 재료가 된 수열 
      - 0>3>3>3>3>4>4>3
    - 위 상승수열에서 레벨에 따른 값에 따라 상승 패턴의 상승값이 결정 : 예(1 레벨 이라면 첫 번째 값인 '0')

2) 공격속도
    - 상승패턴-> 1,1.05,1.1,1.15,1.2,1.25,13
      * 레벨당 0.05 상승
       
3) 치명타율 
    - 상승패턴 -> 1,2,3,4,5,6
      * 레벨당 1% 상승  

4) 치명타 계수
    - 상승패턴 ->x1.20,	x1.30	,x1.40,	x1.50	,x1.60,	x1.70,	x1.80,	x1.90,	x2.00
      * 레벨당 0.1 상승  
5) 체력
    - 상승패턴 ->5.00,	10.00	,15.00	,21.00	,27.00	,34.00,	42.00,	50.00	,59.00
      * A049982 수열에 5를 더한 값을 기반으로 상승 수열이 만들어짐
    - 재료가 된 수열 
      - 0>5>5>6>6>7>8>8
    - 위 상승수열에서 레벨에 따른 값을 사용
6) 체력 재생
    - 상승패턴 ->5.00,	10.00	,15.00	,21.00	,27.00	,34.00,	42.00,	50.00	,59.00
      * A157726 수열에 0.01을 곱한 값을 기반으로 상승 수열이 만들어짐
    - 재료가 된 수열 
      - 0>0.04>0.05>0.06>0.08>0.11>0.16>0.19
      ```
    - 위 상승수열에서 레벨에 따른 값을 사용
### 골드 관련

1) 데미지 골드
    - 상승패턴 ->  10$,12$,14$,17$,20$,24$,29$,35$,42$
      * A003114 수열을 기반으로 상승 수열이 만들어짐      
    - 재료가 된 수열 
      - 0>2>2>3>3>4>5>6
    - 위 상승수열에서 레벨에 따른 값에 따라 상승 패턴의 상승값이 결정
2) 공격속도 골드
    - 상승패턴 ->  5$,7$,10$,15$,21$,28$,36$,47$,58$
      * A006431 수열을 기반으로 상승 수열이 만들어짐
    - 재료가 된 수열 
      - 0>2>3>5>6>7>8>11
    - 위 상승수열에서 레벨에 따른 값에 따라 상승 패턴의 상승값이 결정
       
3) 치명타율 골드
    - 상승패턴 -> 4$,6$,9$,13$,18$,24$,31$,39$,48$
      * 순수 자연수 증가값 (1, 2, 3, 4 ....)을 상승수열로 사용 (단 1은 제외)
    - 재료가 된 상승수열 
      - 0>2>3>4>5>6>7>8
    * 위 상승수열에서 레벨에 따른 값에 따라 상승 패턴의 상승값이 결정

4) 치명타 계수
    - 상승패턴 -> 10$,12$,15$,19$,23$,28$,34$,41$,49$
      * A025528 수열을 기반으로 상승 수열이 만들어짐
    - 재료가 고안된 상승수열 
      - 0>2>3>4>4>5>6>7
    * 위 상승수열에서 레벨에 따른 값에 따라 상승 패턴의 상승값이 결정

5) 체력 골드
    - 상승패턴 -> 10$,12$,15$,19$,23$,28$,33$,39$,47$
      * A005374 수열을 기반으로 상승 수열이 만들어짐
    - 고안된 상승수열 
      - 0>2>3>4>4>5>5>6
    * 위 상승수열에서 레벨에 따른 값에 따라 상승 패턴의 상승값이 결정

6) 체력 재생 골드
    - 상승패턴 -> 5$,7$,10$,14$,18$,23$,28$,34$,42$
      * A025528 수열을 기반으로 상승 수열이 만들어짐
    - 고안된 상승수열 
      - 0>2>3>4>4>5>5>6
    * 위 상승수열에서 레벨에 따른 값에 따라 상승 패턴의 상승값이 결정

